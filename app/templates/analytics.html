<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta Configuration -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Page Title -->
  <title>ðŸ“Š Analytics Dashboard | CollaboLearn</title>

  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style/analytics.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <main class="analytics-layout">

    <!-- Header -->
    <header class="analytics-header">
      <h1>ðŸ“ˆ CollaboLearn Analytics</h1>
      <nav>
        <a href="{{ url_for('main.admin_dashboard') }}" class="back-link">
          <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
      </nav>
    </header>

    <!-- Compact Stats Overview -->
    <section class="stats-overview" aria-label="Platform Statistics">
      {% set stats = {
        'Active Users': analytics_data.active_users,
        'Courses': analytics_data.total_courses,
        'Submissions': analytics_data.total_submissions,
        'Avg. Feedback': analytics_data.avg_feedback,
        'System Load': analytics_data.system_load
      } %}
      {% for label, value in stats.items() %}
      <article class="stat-card small">
        <h3>{{ label }}</h3>
        <p class="stat-value">{{ value if value is not none else '--' }}</p>
      </article>
      {% endfor %}
    </section>

    <!-- Charts Section -->
    <section class="charts-section" aria-label="Analytics Charts">
      <article class="chart-box">
        <h3>User Engagement (Daily)</h3>
        <canvas id="userEngagementChart"></canvas>
      </article>
      <article class="chart-box">
        <h3>Feedback Sentiment</h3>
        <canvas id="feedbackChart"></canvas>
      </article>
      <article class="chart-box">
        <h3>Most Visited Pages</h3>
        <canvas id="pageVisitsChart"></canvas>
      </article>
      <article class="chart-box">
        <h3>New Users Weekly</h3>
        <canvas id="userGrowthChart"></canvas>
      </article>
    </section>

  </main>

  <!-- Scripts -->
  <script src="{{ url_for('static', filename='js/analytics.js') }}"></script>
  <script>
    window.analyticsCharts = {{ analytics_data.charts | tojson }};
  </script>
</body>
</html>
